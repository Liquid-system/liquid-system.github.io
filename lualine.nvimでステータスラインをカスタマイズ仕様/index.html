<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Lualine.nvimでステータスラインをカスタマイズ仕様！ | 時祷書</title><link rel=stylesheet href=https://liquid-system.github.io/css/style.css><link rel=stylesheet href=https://liquid-system.github.io/css/custom.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Noto%20Sans%20JP&display=swap" rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=https://liquid-system.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://liquid-system.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://liquid-system.github.io/favicon-16x16.png><link rel=manifest href=https://liquid-system.github.io/site.webmanifest><link rel=mask-icon href=https://liquid-system.github.io/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://liquid-system.github.io/lualine.nvim%E3%81%A7%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E4%BB%95%E6%A7%98/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://liquid-system.github.io><h1 id=nav-heading class="title is-4">時祷書</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"></nav></div></nav><nav class=nav></nav></div><script src=https://liquid-system.github.io/js/navicon-shift.js></script></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"><a class="subtitle is-6" href=https://liquid-system.github.io/tags/tech/>#tech</a>
| <a class="subtitle is-6" href=https://liquid-system.github.io/tags/neovim/>#neovim</a></div><h2 class="subtitle is-6">03/17</h2><h1 class=title>Lualine.nvimでステータスラインをカスタマイズ仕様！</h1><div class=content><p>この記事は<a href=https://vim-jp.org/ekiden/>vim駅伝</a>3/17日の記事です。</p><p>neovimやvimを豪華に彩る中でおそらく必須となるであろうステータスライン系プラグインの紹介記事です。</p><p>現在公開されているプラグインは様々な種類がありますが、luaで書かれた中ではおそらくlualine.nvimがデファクトです。</p><p><a href=https://github.com/nvim-lualine/lualine.nvim>https://github.com/nvim-lualine/lualine.nvim</a></p><p><em><strong>導入後</strong></em><br><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2664731/52bf9aa3-3dc0-ffcd-2aae-7f8058578f35.jpeg alt="2023-03-17 13.17のイメージ.jpg"></p><p>筆者のコード</p><p><a href=https://github.com/Liquid-system/NeovimConfig/blob/main/lua/plugins/lualine.lua>https://github.com/Liquid-system/NeovimConfig/blob/main/lua/plugins/lualine.lua</a></p><p>READMEが非常に丁寧に書かれているので、ステータスラインの位置を指定し、lualineに同梱されているコンポーネントを設定するのが定石ですが、筆者はlualine.nvimの<code>examples</code>ディレクトリにある<code>evil_lualine.lua</code>をカスタマイズしています。</p><p><a href=https://github.com/nvim-lualine/lualine.nvim/blob/master/examples/evil_lualine.lua>https://github.com/nvim-lualine/lualine.nvim/blob/master/examples/evil_lualine.lua</a></p><p>改良すべき点<br>Lspを表示するコンポーネントです。<code>null-ls</code>などのフォーマット系プラグインを使用している場合は<code>client.name ~= "null-ls" then</code>とif文で除外するのがベターです。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>ins_right {
</span></span><span style=display:flex><span>      <span style=color:#75715e>-- Lsp server name .</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>function</span>()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>local</span> msg <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;No Active&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>local</span> buf_ft <span style=color:#f92672>=</span> vim.api.nvim_buf_get_option(<span style=color:#ae81ff>0</span>, <span style=color:#e6db74>&#34;filetype&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>local</span> clients <span style=color:#f92672>=</span> vim.lsp.get_active_clients()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> next(clients) <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> msg
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> _, client <span style=color:#66d9ef>in</span> ipairs(clients) <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>local</span> filetypes <span style=color:#f92672>=</span> client.config.filetypes
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> filetypes <span style=color:#f92672>and</span> vim.fn.index(filetypes, buf_ft) <span style=color:#f92672>~=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>and</span> client.name <span style=color:#f92672>~=</span> <span style=color:#e6db74>&#34;null-ls&#34;</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> client.name
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> msg
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>,
</span></span><span style=display:flex><span>      icon <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34; LSP:&#34;</span>,
</span></span><span style=display:flex><span>      color <span style=color:#f92672>=</span> { fg <span style=color:#f92672>=</span> colors.orange },
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h4 id=結論>結論</h4><p>lualine.nvimは比較的癖のないプラグインで扱いやすいです。皆さんもぜひステータスラインライフを送りましょう！</p></div></div></section><section class=section><div class="container has-text-centered"><p>&copy;2022 Liquid-system | <a href=https://github.com/Liquid-system>github</a> | <a href=https://misskey.io/@Liquid_system>misskey.io</a></p></div></section></body></html>